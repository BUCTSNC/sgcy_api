/* esm.sh - esbuild bundle(ajv@8.10.0/dist/jtd) deno production */
import __uri_js$ from "/v68/uri-js@4.4.1/deno/uri-js.js";import __json_schema_traverse$ from "/v68/json-schema-traverse@1.0.0/deno/json-schema-traverse.js";import __fast_deep_equal$ from "/v68/fast-deep-equal@3.1.3/deno/fast-deep-equal.js";var Ao=Object.create;var Bt=Object.defineProperty;var Vo=Object.getOwnPropertyDescriptor;var zo=Object.getOwnPropertyNames;var Fo=Object.getPrototypeOf,Ko=Object.prototype.hasOwnProperty;var Jo=t=>Bt(t,"__esModule",{value:!0});var Wt=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Uo=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of zo(e))!Ko.call(t,s)&&(r||s!=="default")&&Bt(t,s,{get:()=>e[s],enumerable:!(n=Vo(e,s))||n.enumerable});return t},an=(t,e)=>Uo(Jo(Bt(t!=null?Ao(Fo(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var st=g(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.regexpCode=O.getEsmExportName=O.getProperty=O.safeStringify=O.stringify=O.strConcat=O.addCodeArg=O.str=O._=O.nil=O._Code=O.Name=O.IDENTIFIER=O._CodeOrName=void 0;var wt=class{};O._CodeOrName=wt;O.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Ve=class extends wt{constructor(e){super();if(!O.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};O.Name=Ve;var te=class extends wt{constructor(e){super();this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof Ve&&(r[n.str]=(r[n.str]||0)+1),r),{})}};O._Code=te;O.nil=new te("");function cn(t,...e){let r=[t[0]],n=0;for(;n<e.length;)Xt(r,e[n]),r.push(t[++n]);return new te(r)}O._=cn;var Qt=new te("+");function un(t,...e){let r=[nt(t[0])],n=0;for(;n<e.length;)r.push(Qt),Xt(r,e[n]),r.push(Qt,nt(t[++n]));return Go(r),new te(r)}O.str=un;function Xt(t,e){e instanceof te?t.push(...e._items):e instanceof Ve?t.push(e):t.push(Bo(e))}O.addCodeArg=Xt;function Go(t){let e=1;for(;e<t.length-1;){if(t[e]===Qt){let r=Lo(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Lo(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Ve||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Ve))return`"${t}${e.slice(1)}`}function Ho(t,e){return e.emptyStr()?t:t.emptyStr()?e:un`${t}${e}`}O.strConcat=Ho;function Bo(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:nt(Array.isArray(t)?t.join(","):t)}function Wo(t){return new te(nt(t))}O.stringify=Wo;function nt(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}O.safeStringify=nt;function Qo(t){return typeof t=="string"&&O.IDENTIFIER.test(t)?new te(`.${t}`):cn`[${t}]`}O.getProperty=Qo;function Xo(t){if(typeof t=="string"&&O.IDENTIFIER.test(t))return new te(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}O.getEsmExportName=Xo;function Yo(t){return new te(t.toString())}O.regexpCode=Yo});var er=g(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.ValueScope=B.ValueScopeName=B.Scope=B.varKinds=B.UsedValueState=void 0;var X=st(),ln=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`);this.value=e.value}},Yt;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Yt=B.UsedValueState||(B.UsedValueState={}));B.varKinds={const:new X.Name("const"),let:new X.Name("let"),var:new X.Name("var")};var Zt=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof X.Name?e:this.name(e)}name(e){return new X.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};B.Scope=Zt;var xt=class extends X.Name{constructor(e,r){super(r);this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,X._)`.${new X.Name(r)}[${n}]`}};B.ValueScopeName=xt;var Zo=(0,X._)`\n`,dn=class extends Zt{constructor(e){super(e);this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?Zo:X.nil}}get(){return this._scope}name(e){return new xt(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:o}=s,a=(n=r.key)!==null&&n!==void 0?n:r.ref,i=this._values[o];if(i){let u=i.get(a);if(u)return u}else i=this._values[o]=new Map;i.set(a,s);let c=this._scope[o]||(this._scope[o]=[]),l=c.length;return c[l]=r.ref,s.setValue(r,{property:o,itemIndex:l}),s}getValue(e,r){let n=this._values[e];if(!!n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,X._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let o=X.nil;for(let a in e){let i=e[a];if(!i)continue;let c=n[a]=n[a]||new Map;i.forEach(l=>{if(c.has(l))return;c.set(l,Yt.Started);let u=r(l);if(u){let d=this.opts.es5?B.varKinds.var:B.varKinds.const;o=(0,X._)`${o}${d} ${l} = ${u};${this.opts._n}`}else if(u=s?.(l))o=(0,X._)`${o}${u}${this.opts._n}`;else throw new ln(l);c.set(l,Yt.Completed)})}return o}};B.ValueScope=dn});var q=g(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.or=w.and=w.not=w.CodeGen=w.operators=w.varKinds=w.ValueScopeName=w.ValueScope=w.Scope=w.Name=w.regexpCode=w.stringify=w.getProperty=w.nil=w.strConcat=w.str=w._=void 0;var P=st(),re=er(),ye=st();Object.defineProperty(w,"_",{enumerable:!0,get:function(){return ye._}});Object.defineProperty(w,"str",{enumerable:!0,get:function(){return ye.str}});Object.defineProperty(w,"strConcat",{enumerable:!0,get:function(){return ye.strConcat}});Object.defineProperty(w,"nil",{enumerable:!0,get:function(){return ye.nil}});Object.defineProperty(w,"getProperty",{enumerable:!0,get:function(){return ye.getProperty}});Object.defineProperty(w,"stringify",{enumerable:!0,get:function(){return ye.stringify}});Object.defineProperty(w,"regexpCode",{enumerable:!0,get:function(){return ye.regexpCode}});Object.defineProperty(w,"Name",{enumerable:!0,get:function(){return ye.Name}});var jt=er();Object.defineProperty(w,"Scope",{enumerable:!0,get:function(){return jt.Scope}});Object.defineProperty(w,"ValueScope",{enumerable:!0,get:function(){return jt.ValueScope}});Object.defineProperty(w,"ValueScopeName",{enumerable:!0,get:function(){return jt.ValueScopeName}});Object.defineProperty(w,"varKinds",{enumerable:!0,get:function(){return jt.varKinds}});w.operators={GT:new P._Code(">"),GTE:new P._Code(">="),LT:new P._Code("<"),LTE:new P._Code("<="),EQ:new P._Code("==="),NEQ:new P._Code("!=="),NOT:new P._Code("!"),OR:new P._Code("||"),AND:new P._Code("&&"),ADD:new P._Code("+")};var ge=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},fn=class extends ge{constructor(e,r,n){super();this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?re.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(!!e[this.name.str])return this.rhs&&(this.rhs=Fe(this.rhs,e,r)),this}get names(){return this.rhs instanceof P._CodeOrName?this.rhs.names:{}}},nr=class extends ge{constructor(e,r,n){super();this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof P.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Fe(this.rhs,e,r),this}get names(){let e=this.lhs instanceof P.Name?{}:{...this.lhs.names};return Nt(e,this.rhs)}},hn=class extends nr{constructor(e,r,n,s){super(e,n,s);this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},pn=class extends ge{constructor(e){super();this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},mn=class extends ge{constructor(e){super();this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},_n=class extends ge{constructor(e){super();this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},yn=class extends ge{constructor(e){super();this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Fe(this.code,e,r),this}get names(){return this.code instanceof P._CodeOrName?this.code.names:{}}},kt=class extends ge{constructor(e=[]){super();this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let o=n[s];o.optimizeNames(e,r)||(xo(e,o.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Re(e,r.names),{})}},$e=class extends kt{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},gn=class extends kt{},ot=class extends $e{};ot.kind="else";var ie=class extends $e{constructor(e,r){super(r);this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new ot(n):n}if(r)return e===!1?r instanceof ie?r:r.nodes:this.nodes.length?this:new ie(En(e),r instanceof ie?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Fe(this.condition,e,r),this}get names(){let e=super.names;return Nt(e,this.condition),this.else&&Re(e,this.else.names),e}};ie.kind="if";var ze=class extends $e{};ze.kind="for";var $n=class extends ze{constructor(e){super();this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(!!super.optimizeNames(e,r))return this.iteration=Fe(this.iteration,e,r),this}get names(){return Re(super.names,this.iteration.names)}},vn=class extends ze{constructor(e,r,n,s){super();this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?re.varKinds.var:this.varKind,{name:n,from:s,to:o}=this;return`for(${r} ${n}=${s}; ${n}<${o}; ${n}++)`+super.render(e)}get names(){let e=Nt(super.names,this.from);return Nt(e,this.to)}},tr=class extends ze{constructor(e,r,n,s){super();this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(!!super.optimizeNames(e,r))return this.iterable=Fe(this.iterable,e,r),this}get names(){return Re(super.names,this.iterable.names)}},bt=class extends $e{constructor(e,r,n){super();this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};bt.kind="func";var Et=class extends kt{render(e){return"return "+super.render(e)}};Et.kind="return";var wn=class extends $e{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Re(e,this.catch.names),this.finally&&Re(e,this.finally.names),e}},Pt=class extends $e{constructor(e){super();this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Pt.kind="catch";var St=class extends $e{render(e){return"finally"+super.render(e)}};St.kind="finally";var bn=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new re.Scope({parent:e}),this._nodes=[new gn]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let o=this._scope.toName(r);return n!==void 0&&s&&(this._constants[o.str]=n),this._leafNode(new fn(e,o,n)),o}const(e,r,n){return this._def(re.varKinds.const,e,r,n)}let(e,r,n){return this._def(re.varKinds.let,e,r,n)}var(e,r,n){return this._def(re.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new nr(e,r,n))}add(e,r){return this._leafNode(new hn(e,w.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==P.nil&&this._leafNode(new yn(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,P.addCodeArg)(r,s));return r.push("}"),new P._Code(r)}if(e,r,n){if(this._blockNode(new ie(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new ie(e))}else(){return this._elseNode(new ot)}endIf(){return this._endBlockNode(ie,ot)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new $n(e),r)}forRange(e,r,n,s,o=this.opts.es5?re.varKinds.var:re.varKinds.let){let a=this._scope.toName(e);return this._for(new vn(o,a,r,n),()=>s(a))}forOf(e,r,n,s=re.varKinds.const){let o=this._scope.toName(e);if(this.opts.es5){let a=r instanceof P.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,P._)`${a}.length`,i=>{this.var(o,(0,P._)`${a}[${i}]`),n(o)})}return this._for(new tr("of",s,o,r),()=>n(o))}forIn(e,r,n,s=this.opts.es5?re.varKinds.var:re.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,P._)`Object.keys(${r})`,n);let o=this._scope.toName(e);return this._for(new tr("in",s,o,r),()=>n(o))}endFor(){return this._endBlockNode(ze)}label(e){return this._leafNode(new pn(e))}break(e){return this._leafNode(new mn(e))}return(e){let r=new Et;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Et)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new wn;if(this._blockNode(s),this.code(e),r){let o=this.name("e");this._currNode=s.catch=new Pt(o),r(o)}return n&&(this._currNode=s.finally=new St,this.code(n)),this._endBlockNode(Pt,St)}throw(e){return this._leafNode(new _n(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=P.nil,n,s){return this._blockNode(new bt(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(bt)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof ie))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};w.CodeGen=bn;function Re(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Nt(t,e){return e instanceof P._CodeOrName?Re(t,e.names):t}function Fe(t,e,r){if(t instanceof P.Name)return n(t);if(!s(t))return t;return new P._Code(t._items.reduce((o,a)=>(a instanceof P.Name&&(a=n(a)),a instanceof P._Code?o.push(...a._items):o.push(a),o),[]));function n(o){let a=r[o.str];return a===void 0||e[o.str]!==1?o:(delete e[o.str],a)}function s(o){return o instanceof P._Code&&o._items.some(a=>a instanceof P.Name&&e[a.str]===1&&r[a.str]!==void 0)}}function xo(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function En(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,P._)`!${rr(t)}`}w.not=En;var ea=Pn(w.operators.AND);function ta(...t){return t.reduce(ea)}w.and=ta;var ra=Pn(w.operators.OR);function na(...t){return t.reduce(ra)}w.or=na;function Pn(t){return(e,r)=>e===P.nil?r:r===P.nil?e:(0,P._)`${rr(e)} ${t} ${rr(r)}`}function rr(t){return t instanceof P.Name?t:(0,P._)`(${t})`}});var F=g(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.checkStrictMode=b.getErrorPath=b.Type=b.useFunc=b.setEvaluated=b.evaluatedPropsToName=b.mergeEvaluated=b.eachItem=b.unescapeJsonPointer=b.escapeJsonPointer=b.escapeFragment=b.unescapeFragment=b.schemaRefOrVal=b.schemaHasRulesButRef=b.schemaHasRules=b.checkUnknownRules=b.alwaysValidSchema=b.toHash=void 0;var T=q(),sa=st();function oa(t){let e={};for(let r of t)e[r]=!0;return e}b.toHash=oa;function aa(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(jn(t,e),!kn(e,t.self.RULES.all))}b.alwaysValidSchema=aa;function jn(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let o in e)s[o]||qn(t,`unknown keyword: "${o}"`)}b.checkUnknownRules=jn;function kn(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}b.schemaHasRules=kn;function ia(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}b.schemaHasRulesButRef=ia;function ca({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,T._)`${r}`}return(0,T._)`${t}${e}${(0,T.getProperty)(n)}`}b.schemaRefOrVal=ca;function ua(t){return On(decodeURIComponent(t))}b.unescapeFragment=ua;function la(t){return encodeURIComponent(sr(t))}b.escapeFragment=la;function sr(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}b.escapeJsonPointer=sr;function On(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}b.unescapeJsonPointer=On;function da(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}b.eachItem=da;function Sn({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,o,a,i)=>{let c=a===void 0?o:a instanceof T.Name?(o instanceof T.Name?t(s,o,a):e(s,o,a),a):o instanceof T.Name?(e(s,a,o),o):r(o,a);return i===T.Name&&!(c instanceof T.Name)?n(s,c):c}}b.mergeEvaluated={props:Sn({mergeNames:(t,e,r)=>t.if((0,T._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,T._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,T._)`${r} || {}`).code((0,T._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,T._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,T._)`${r} || {}`),or(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Rn}),items:Sn({mergeNames:(t,e,r)=>t.if((0,T._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,T._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,T._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,T._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Rn(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,T._)`{}`);return e!==void 0&&or(t,r,e),r}b.evaluatedPropsToName=Rn;function or(t,e,r){Object.keys(r).forEach(n=>t.assign((0,T._)`${e}${(0,T.getProperty)(n)}`,!0))}b.setEvaluated=or;var Nn={};function fa(t,e){return t.scopeValue("func",{ref:e,code:Nn[e.code]||(Nn[e.code]=new sa._Code(e.code))})}b.useFunc=fa;var Cn;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(Cn=b.Type||(b.Type={}));function ha(t,e,r){if(t instanceof T.Name){let n=e===Cn.Num;return r?n?(0,T._)`"[" + ${t} + "]"`:(0,T._)`"['" + ${t} + "']"`:n?(0,T._)`"/" + ${t}`:(0,T._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,T.getProperty)(t).toString():"/"+sr(t)}b.getErrorPath=ha;function qn(t,e,r=t.opts.strictSchema){if(!!r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}b.checkStrictMode=qn});var ne=g(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});var G=q(),pa={data:new G.Name("data"),valCxt:new G.Name("valCxt"),instancePath:new G.Name("instancePath"),parentData:new G.Name("parentData"),parentDataProperty:new G.Name("parentDataProperty"),rootData:new G.Name("rootData"),dynamicAnchors:new G.Name("dynamicAnchors"),vErrors:new G.Name("vErrors"),errors:new G.Name("errors"),this:new G.Name("this"),self:new G.Name("self"),scope:new G.Name("scope"),json:new G.Name("json"),jsonPos:new G.Name("jsonPos"),jsonLen:new G.Name("jsonLen"),jsonPart:new G.Name("jsonPart")};ar.default=pa});var at=g(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.extendErrors=L.resetErrorsCount=L.reportExtraError=L.reportError=L.keyword$DataError=L.keywordError=void 0;var k=q(),Ot=F(),W=ne();L.keywordError={message:({keyword:t})=>(0,k.str)`must pass "${t}" keyword validation`};L.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,k.str)`"${t}" keyword must be ${e} ($data)`:(0,k.str)`"${t}" keyword is invalid ($data)`};function ma(t,e=L.keywordError,r,n){let{it:s}=t,{gen:o,compositeRule:a,allErrors:i}=s,c=Dn(t,e,r);n??(a||i)?Tn(o,c):In(s,(0,k._)`[${c}]`)}L.reportError=ma;function _a(t,e=L.keywordError,r){let{it:n}=t,{gen:s,compositeRule:o,allErrors:a}=n,i=Dn(t,e,r);Tn(s,i),o||a||In(n,W.default.vErrors)}L.reportExtraError=_a;function ya(t,e){t.assign(W.default.errors,e),t.if((0,k._)`${W.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,k._)`${W.default.vErrors}.length`,e),()=>t.assign(W.default.vErrors,null)))}L.resetErrorsCount=ya;function ga({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:o}){if(s===void 0)throw new Error("ajv implementation error");let a=t.name("err");t.forRange("i",s,W.default.errors,i=>{t.const(a,(0,k._)`${W.default.vErrors}[${i}]`),t.if((0,k._)`${a}.instancePath === undefined`,()=>t.assign((0,k._)`${a}.instancePath`,(0,k.strConcat)(W.default.instancePath,o.errorPath))),t.assign((0,k._)`${a}.schemaPath`,(0,k.str)`${o.errSchemaPath}/${e}`),o.opts.verbose&&(t.assign((0,k._)`${a}.schema`,r),t.assign((0,k._)`${a}.data`,n))})}L.extendErrors=ga;function Tn(t,e){let r=t.const("err",e);t.if((0,k._)`${W.default.vErrors} === null`,()=>t.assign(W.default.vErrors,(0,k._)`[${r}]`),(0,k._)`${W.default.vErrors}.push(${r})`),t.code((0,k._)`${W.default.errors}++`)}function In(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,k._)`new ${t.ValidationError}(${e})`):(r.assign((0,k._)`${n}.errors`,e),r.return(!1))}var Ce={keyword:new k.Name("keyword"),schemaPath:new k.Name("schemaPath"),params:new k.Name("params"),propertyName:new k.Name("propertyName"),message:new k.Name("message"),schema:new k.Name("schema"),parentSchema:new k.Name("parentSchema")};function Dn(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,k._)`{}`:$a(t,e,r)}function $a(t,e,r={}){let{gen:n,it:s}=t,o=[va(s,r),wa(t,r)];return ba(t,e,o),n.object(...o)}function va({errorPath:t},{instancePath:e}){let r=e?(0,k.str)`${t}${(0,Ot.getErrorPath)(e,Ot.Type.Str)}`:t;return[W.default.instancePath,(0,k.strConcat)(W.default.instancePath,r)]}function wa({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,k.str)`${e}/${t}`;return r&&(s=(0,k.str)`${s}${(0,Ot.getErrorPath)(r,Ot.Type.Str)}`),[Ce.schemaPath,s]}function ba(t,{params:e,message:r},n){let{keyword:s,data:o,schemaValue:a,it:i}=t,{opts:c,propertyName:l,topSchemaRef:u,schemaPath:d}=i;n.push([Ce.keyword,s],[Ce.params,typeof e=="function"?e(t):e||(0,k._)`{}`]),c.messages&&n.push([Ce.message,typeof r=="function"?r(t):r]),c.verbose&&n.push([Ce.schema,a],[Ce.parentSchema,(0,k._)`${u}${d}`],[W.default.data,o]),l&&n.push([Ce.propertyName,l])}});var An=g(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.boolOrEmptySchema=Ke.topBoolOrEmptySchema=void 0;var Ea=at(),Pa=q(),Sa=ne(),Na={message:"boolean schema is false"};function ja(t){let{gen:e,schema:r,validateName:n}=t;r===!1?Mn(t,!1):typeof r=="object"&&r.$async===!0?e.return(Sa.default.data):(e.assign((0,Pa._)`${n}.errors`,null),e.return(!0))}Ke.topBoolOrEmptySchema=ja;function ka(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),Mn(t)):r.var(e,!0)}Ke.boolOrEmptySchema=ka;function Mn(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Ea.reportError)(s,Na,void 0,e)}});var ir=g(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.getRules=Je.isJSONType=void 0;var Oa=["string","number","integer","boolean","null","object","array"],Ra=new Set(Oa);function Ca(t){return typeof t=="string"&&Ra.has(t)}Je.isJSONType=Ca;function qa(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Je.getRules=qa});var cr=g(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.shouldUseRule=ve.shouldUseGroup=ve.schemaHasRulesForType=void 0;function Ta({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&Vn(t,n)}ve.schemaHasRulesForType=Ta;function Vn(t,e){return e.rules.some(r=>zn(t,r))}ve.shouldUseGroup=Vn;function zn(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}ve.shouldUseRule=zn});var Rt=g(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.reportTypeError=J.checkDataTypes=J.checkDataType=J.coerceAndCheckDataType=J.getJSONTypes=J.getSchemaTypes=J.DataType=void 0;var Ia=ir(),Da=cr(),Ma=at(),$=q(),Fn=F(),it;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(it=J.DataType||(J.DataType={}));function Aa(t){let e=Kn(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}J.getSchemaTypes=Aa;function Kn(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Ia.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}J.getJSONTypes=Kn;function Va(t,e){let{gen:r,data:n,opts:s}=t,o=za(e,s.coerceTypes),a=e.length>0&&!(o.length===0&&e.length===1&&(0,Da.schemaHasRulesForType)(t,e[0]));if(a){let i=lr(e,n,s.strictNumbers,it.Wrong);r.if(i,()=>{o.length?Fa(t,e,o):dr(t)})}return a}J.coerceAndCheckDataType=Va;var Jn=new Set(["string","number","integer","boolean","null"]);function za(t,e){return e?t.filter(r=>Jn.has(r)||e==="array"&&r==="array"):[]}function Fa(t,e,r){let{gen:n,data:s,opts:o}=t,a=n.let("dataType",(0,$._)`typeof ${s}`),i=n.let("coerced",(0,$._)`undefined`);o.coerceTypes==="array"&&n.if((0,$._)`${a} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,$._)`${s}[0]`).assign(a,(0,$._)`typeof ${s}`).if(lr(e,s,o.strictNumbers),()=>n.assign(i,s))),n.if((0,$._)`${i} !== undefined`);for(let l of r)(Jn.has(l)||l==="array"&&o.coerceTypes==="array")&&c(l);n.else(),dr(t),n.endIf(),n.if((0,$._)`${i} !== undefined`,()=>{n.assign(s,i),Ka(t,i)});function c(l){switch(l){case"string":n.elseIf((0,$._)`${a} == "number" || ${a} == "boolean"`).assign(i,(0,$._)`"" + ${s}`).elseIf((0,$._)`${s} === null`).assign(i,(0,$._)`""`);return;case"number":n.elseIf((0,$._)`${a} == "boolean" || ${s} === null
              || (${a} == "string" && ${s} && ${s} == +${s})`).assign(i,(0,$._)`+${s}`);return;case"integer":n.elseIf((0,$._)`${a} === "boolean" || ${s} === null
              || (${a} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(i,(0,$._)`+${s}`);return;case"boolean":n.elseIf((0,$._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(i,!1).elseIf((0,$._)`${s} === "true" || ${s} === 1`).assign(i,!0);return;case"null":n.elseIf((0,$._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(i,null);return;case"array":n.elseIf((0,$._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${s} === null`).assign(i,(0,$._)`[${s}]`)}}}function Ka({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,$._)`${e} !== undefined`,()=>t.assign((0,$._)`${e}[${r}]`,n))}function ur(t,e,r,n=it.Correct){let s=n===it.Correct?$.operators.EQ:$.operators.NEQ,o;switch(t){case"null":return(0,$._)`${e} ${s} null`;case"array":o=(0,$._)`Array.isArray(${e})`;break;case"object":o=(0,$._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":o=a((0,$._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":o=a();break;default:return(0,$._)`typeof ${e} ${s} ${t}`}return n===it.Correct?o:(0,$.not)(o);function a(i=$.nil){return(0,$.and)((0,$._)`typeof ${e} == "number"`,i,r?(0,$._)`isFinite(${e})`:$.nil)}}J.checkDataType=ur;function lr(t,e,r,n){if(t.length===1)return ur(t[0],e,r,n);let s,o=(0,Fn.toHash)(t);if(o.array&&o.object){let a=(0,$._)`typeof ${e} != "object"`;s=o.null?a:(0,$._)`!${e} || ${a}`,delete o.null,delete o.array,delete o.object}else s=$.nil;o.number&&delete o.integer;for(let a in o)s=(0,$.and)(s,ur(a,e,r,n));return s}J.checkDataTypes=lr;var Ja={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,$._)`{type: ${t}}`:(0,$._)`{type: ${e}}`};function dr(t){let e=Ua(t);(0,Ma.reportError)(e,Ja)}J.reportTypeError=dr;function Ua(t){let{gen:e,data:r,schema:n}=t,s=(0,Fn.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var Gn=g(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.assignDefaults=void 0;var Ue=q(),Ga=F();function La(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)Un(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,o)=>Un(t,o,s.default))}Ct.assignDefaults=La;function Un(t,e,r){let{gen:n,compositeRule:s,data:o,opts:a}=t;if(r===void 0)return;let i=(0,Ue._)`${o}${(0,Ue.getProperty)(e)}`;if(s){(0,Ga.checkStrictMode)(t,`default is ignored for: ${i}`);return}let c=(0,Ue._)`${i} === undefined`;a.useDefaults==="empty"&&(c=(0,Ue._)`${c} || ${i} === null || ${i} === ""`),n.if(c,(0,Ue._)`${i} = ${(0,Ue.stringify)(r)}`)}});var be=g(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.validateUnion=C.validateArray=C.usePattern=C.callValidateCode=C.schemaProperties=C.allSchemaProperties=C.noPropertyInData=C.propertyInData=C.isOwnProperty=C.hasPropFunc=C.reportMissingProp=C.checkMissingProp=C.checkReportMissingProp=void 0;var D=q(),fr=F(),we=ne(),Ha=F();function Ba(t,e){let{gen:r,data:n,it:s}=t;r.if(pr(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,D._)`${e}`},!0),t.error()})}C.checkReportMissingProp=Ba;function Wa({gen:t,data:e,it:{opts:r}},n,s){return(0,D.or)(...n.map(o=>(0,D.and)(pr(t,e,o,r.ownProperties),(0,D._)`${s} = ${o}`)))}C.checkMissingProp=Wa;function Qa(t,e){t.setParams({missingProperty:e},!0),t.error()}C.reportMissingProp=Qa;function Ln(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,D._)`Object.prototype.hasOwnProperty`})}C.hasPropFunc=Ln;function hr(t,e,r){return(0,D._)`${Ln(t)}.call(${e}, ${r})`}C.isOwnProperty=hr;function Xa(t,e,r,n){let s=(0,D._)`${e}${(0,D.getProperty)(r)} !== undefined`;return n?(0,D._)`${s} && ${hr(t,e,r)}`:s}C.propertyInData=Xa;function pr(t,e,r,n){let s=(0,D._)`${e}${(0,D.getProperty)(r)} === undefined`;return n?(0,D.or)(s,(0,D.not)(hr(t,e,r))):s}C.noPropertyInData=pr;function Hn(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}C.allSchemaProperties=Hn;function Ya(t,e){return Hn(e).filter(r=>!(0,fr.alwaysValidSchema)(t,e[r]))}C.schemaProperties=Ya;function Za({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:o},it:a},i,c,l){let u=l?(0,D._)`${t}, ${e}, ${n}${s}`:e,d=[[we.default.instancePath,(0,D.strConcat)(we.default.instancePath,o)],[we.default.parentData,a.parentData],[we.default.parentDataProperty,a.parentDataProperty],[we.default.rootData,we.default.rootData]];a.opts.dynamicRef&&d.push([we.default.dynamicAnchors,we.default.dynamicAnchors]);let p=(0,D._)`${u}, ${r.object(...d)}`;return c!==D.nil?(0,D._)`${i}.call(${c}, ${p})`:(0,D._)`${i}(${p})`}C.callValidateCode=Za;var xa=(0,D._)`new RegExp`;function ei({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,o=s(r,n);return t.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,D._)`${s.code==="new RegExp"?xa:(0,Ha.useFunc)(t,s)}(${r}, ${n})`})}C.usePattern=ei;function ti(t){let{gen:e,data:r,keyword:n,it:s}=t,o=e.name("valid");if(s.allErrors){let i=e.let("valid",!0);return a(()=>e.assign(i,!1)),i}return e.var(o,!0),a(()=>e.break()),o;function a(i){let c=e.const("len",(0,D._)`${r}.length`);e.forRange("i",0,c,l=>{t.subschema({keyword:n,dataProp:l,dataPropType:fr.Type.Num},o),e.if((0,D.not)(o),i)})}}C.validateArray=ti;function ri(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,fr.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;let a=e.let("valid",!1),i=e.name("_valid");e.block(()=>r.forEach((c,l)=>{let u=t.subschema({keyword:n,schemaProp:l,compositeRule:!0},i);e.assign(a,(0,D._)`${a} || ${i}`),t.mergeValidEvaluated(u,i)||e.if((0,D.not)(a))})),t.result(a,()=>t.reset(),()=>t.error(!0))}C.validateUnion=ri});var Qn=g(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.validateKeywordUsage=ce.validSchemaType=ce.funcKeywordCode=ce.macroKeywordCode=void 0;var Q=q(),qe=ne(),ni=be(),si=at();function oi(t,e){let{gen:r,keyword:n,schema:s,parentSchema:o,it:a}=t,i=e.macro.call(a.self,s,o,a),c=Wn(r,n,i);a.opts.validateSchema!==!1&&a.self.validateSchema(i,!0);let l=r.name("valid");t.subschema({schema:i,schemaPath:Q.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},l),t.pass(l,()=>t.error(!0))}ce.macroKeywordCode=oi;function ai(t,e){var r;let{gen:n,keyword:s,schema:o,parentSchema:a,$data:i,it:c}=t;ci(c,e);let l=!i&&e.compile?e.compile.call(c.self,o,a,c):e.validate,u=Wn(n,s,l),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)N(),e.modifying&&Bn(t),m(()=>t.error());else{let j=e.async?R():v();e.modifying&&Bn(t),m(()=>ii(t,j))}}function R(){let j=n.let("ruleErrs",null);return n.try(()=>N((0,Q._)`await `),A=>n.assign(d,!1).if((0,Q._)`${A} instanceof ${c.ValidationError}`,()=>n.assign(j,(0,Q._)`${A}.errors`),()=>n.throw(A))),j}function v(){let j=(0,Q._)`${u}.errors`;return n.assign(j,null),N(Q.nil),j}function N(j=e.async?(0,Q._)`await `:Q.nil){let A=c.opts.passContext?qe.default.this:qe.default.self,_=!("compile"in e&&!i||e.schema===!1);n.assign(d,(0,Q._)`${j}${(0,ni.callValidateCode)(t,u,A,_)}`,e.modifying)}function m(j){var A;n.if((0,Q.not)((A=e.valid)!==null&&A!==void 0?A:d),j)}}ce.funcKeywordCode=ai;function Bn(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Q._)`${n.parentData}[${n.parentDataProperty}]`))}function ii(t,e){let{gen:r}=t;r.if((0,Q._)`Array.isArray(${e})`,()=>{r.assign(qe.default.vErrors,(0,Q._)`${qe.default.vErrors} === null ? ${e} : ${qe.default.vErrors}.concat(${e})`).assign(qe.default.errors,(0,Q._)`${qe.default.vErrors}.length`),(0,si.extendErrors)(t)},()=>t.error())}function ci({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function Wn(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Q.stringify)(r)})}function ui(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}ce.validSchemaType=ui;function li({schema:t,opts:e,self:r,errSchemaPath:n},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");let a=s.dependencies;if(a?.some(i=>!Object.prototype.hasOwnProperty.call(t,i)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[o])){let c=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}ce.validateKeywordUsage=li});var Yn=g(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.extendSubschemaMode=Ee.extendSubschemaData=Ee.getSubschema=void 0;var ue=q(),Xn=F();function di(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:o,topSchemaRef:a}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let i=t.schema[e];return r===void 0?{schema:i,schemaPath:(0,ue._)`${t.schemaPath}${(0,ue.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:i[r],schemaPath:(0,ue._)`${t.schemaPath}${(0,ue.getProperty)(e)}${(0,ue.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,Xn.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||o===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:a,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Ee.getSubschema=di;function fi(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:o,propertyName:a}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:i}=e;if(r!==void 0){let{errorPath:l,dataPathArr:u,opts:d}=e,p=i.let("data",(0,ue._)`${e.data}${(0,ue.getProperty)(r)}`,!0);c(p),t.errorPath=(0,ue.str)`${l}${(0,Xn.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,ue._)`${r}`,t.dataPathArr=[...u,t.parentDataProperty]}if(s!==void 0){let l=s instanceof ue.Name?s:i.let("data",s,!0);c(l),a!==void 0&&(t.propertyName=a)}o&&(t.dataTypes=o);function c(l){t.data=l,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,l]}}Ee.extendSubschemaData=fi;function hi(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:o}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),o!==void 0&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=r}Ee.extendSubschemaMode=hi});var ct=g(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.getSchemaRefs=Y.resolveUrl=Y.normalizeId=Y._getFullPath=Y.getFullPath=Y.inlineRef=void 0;var pi=F(),mi=__fast_deep_equal$,_i=__json_schema_traverse$,yi=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function gi(t,e=!0){return typeof t=="boolean"?!0:e===!0?!mr(t):e?Zn(t)<=e:!1}Y.inlineRef=gi;var $i=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function mr(t){for(let e in t){if($i.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(mr)||typeof r=="object"&&mr(r))return!0}return!1}function Zn(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!yi.has(r)&&(typeof t[r]=="object"&&(0,pi.eachItem)(t[r],n=>e+=Zn(n)),e===1/0))return 1/0}return e}function xn(t,e="",r){r!==!1&&(e=Ge(e));let n=t.parse(e);return es(t,n)}Y.getFullPath=xn;function es(t,e){return t.serialize(e).split("#")[0]+"#"}Y._getFullPath=es;var vi=/#\/?$/;function Ge(t){return t?t.replace(vi,""):""}Y.normalizeId=Ge;function wi(t,e,r){return r=Ge(r),t.resolve(e,r)}Y.resolveUrl=wi;var bi=/^[a-z_][-a-z0-9._]*$/i;function Ei(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=Ge(t[r]||e),o={"":s},a=xn(n,s,!1),i={},c=new Set;return _i(t,{allKeys:!0},(d,p,R,v)=>{if(v===void 0)return;let N=a+p,m=o[v];typeof d[r]=="string"&&(m=j.call(this,d[r])),A.call(this,d.$anchor),A.call(this,d.$dynamicAnchor),o[p]=m;function j(_){let V=this.opts.uriResolver.resolve;if(_=Ge(m?V(m,_):_),c.has(_))throw u(_);c.add(_);let I=this.refs[_];return typeof I=="string"&&(I=this.refs[I]),typeof I=="object"?l(d,I.schema,_):_!==Ge(N)&&(_[0]==="#"?(l(d,i[_],_),i[_]=d):this.refs[_]=N),_}function A(_){if(typeof _=="string"){if(!bi.test(_))throw new Error(`invalid anchor "${_}"`);j.call(this,`#${_}`)}}}),i;function l(d,p,R){if(p!==void 0&&!mi(d,p))throw u(R)}function u(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Y.getSchemaRefs=Ei});var Tt=g(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.getData=Pe.KeywordCxt=Pe.validateFunctionCode=void 0;var as=An(),ts=Rt(),yr=cr(),qt=Rt(),Pi=Gn(),lt=Qn(),_r=Yn(),f=q(),y=ne(),Si=ct(),de=F(),ut=at();function Ni(t){if(us(t)&&(ls(t),cs(t))){Oi(t);return}is(t,()=>(0,as.topBoolOrEmptySchema)(t))}Pe.validateFunctionCode=Ni;function is({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},o){s.code.es5?t.func(e,(0,f._)`${y.default.data}, ${y.default.valCxt}`,n.$async,()=>{t.code((0,f._)`"use strict"; ${rs(r,s)}`),ki(t,s),t.code(o)}):t.func(e,(0,f._)`${y.default.data}, ${ji(s)}`,n.$async,()=>t.code(rs(r,s)).code(o))}function ji(t){return(0,f._)`{${y.default.instancePath}="", ${y.default.parentData}, ${y.default.parentDataProperty}, ${y.default.rootData}=${y.default.data}${t.dynamicRef?(0,f._)`, ${y.default.dynamicAnchors}={}`:f.nil}}={}`}function ki(t,e){t.if(y.default.valCxt,()=>{t.var(y.default.instancePath,(0,f._)`${y.default.valCxt}.${y.default.instancePath}`),t.var(y.default.parentData,(0,f._)`${y.default.valCxt}.${y.default.parentData}`),t.var(y.default.parentDataProperty,(0,f._)`${y.default.valCxt}.${y.default.parentDataProperty}`),t.var(y.default.rootData,(0,f._)`${y.default.valCxt}.${y.default.rootData}`),e.dynamicRef&&t.var(y.default.dynamicAnchors,(0,f._)`${y.default.valCxt}.${y.default.dynamicAnchors}`)},()=>{t.var(y.default.instancePath,(0,f._)`""`),t.var(y.default.parentData,(0,f._)`undefined`),t.var(y.default.parentDataProperty,(0,f._)`undefined`),t.var(y.default.rootData,y.default.data),e.dynamicRef&&t.var(y.default.dynamicAnchors,(0,f._)`{}`)})}function Oi(t){let{schema:e,opts:r,gen:n}=t;is(t,()=>{r.$comment&&e.$comment&&fs(t),Ii(t),n.let(y.default.vErrors,null),n.let(y.default.errors,0),r.unevaluated&&Ri(t),ds(t),Ai(t)})}function Ri(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,f._)`${r}.evaluated`),e.if((0,f._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,f._)`${t.evaluated}.props`,(0,f._)`undefined`)),e.if((0,f._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,f._)`${t.evaluated}.items`,(0,f._)`undefined`))}function rs(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,f._)`/*# sourceURL=${r} */`:f.nil}function Ci(t,e){if(us(t)&&(ls(t),cs(t))){qi(t,e);return}(0,as.boolOrEmptySchema)(t,e)}function cs({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function us(t){return typeof t.schema!="boolean"}function qi(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&fs(t),Di(t),Mi(t);let o=n.const("_errs",y.default.errors);ds(t,o),n.var(e,(0,f._)`${o} === ${y.default.errors}`)}function ls(t){(0,de.checkUnknownRules)(t),Ti(t)}function ds(t,e){if(t.opts.jtd)return ns(t,[],!1,e);let r=(0,ts.getSchemaTypes)(t.schema),n=(0,ts.coerceAndCheckDataType)(t,r);ns(t,r,!n,e)}function Ti(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,de.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Ii(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,de.checkStrictMode)(t,"default is ignored in the schema root")}function Di(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Si.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Mi(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function fs({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let o=r.$comment;if(s.$comment===!0)t.code((0,f._)`${y.default.self}.logger.log(${o})`);else if(typeof s.$comment=="function"){let a=(0,f.str)`${n}/$comment`,i=t.scopeValue("root",{ref:e.root});t.code((0,f._)`${y.default.self}.opts.$comment(${o}, ${a}, ${i}.schema)`)}}function Ai(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:o}=t;r.$async?e.if((0,f._)`${y.default.errors} === 0`,()=>e.return(y.default.data),()=>e.throw((0,f._)`new ${s}(${y.default.vErrors})`)):(e.assign((0,f._)`${n}.errors`,y.default.vErrors),o.unevaluated&&Vi(t),e.return((0,f._)`${y.default.errors} === 0`))}function Vi({gen:t,evaluated:e,props:r,items:n}){r instanceof f.Name&&t.assign((0,f._)`${e}.props`,r),n instanceof f.Name&&t.assign((0,f._)`${e}.items`,n)}function ns(t,e,r,n){let{gen:s,schema:o,data:a,allErrors:i,opts:c,self:l}=t,{RULES:u}=l;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,de.schemaHasRulesButRef)(o,u))){s.block(()=>hs(t,"$ref",u.all.$ref.definition));return}c.jtd||zi(t,e),s.block(()=>{for(let p of u.rules)d(p);d(u.post)});function d(p){!(0,yr.shouldUseGroup)(o,p)||(p.type?(s.if((0,qt.checkDataType)(p.type,a,c.strictNumbers)),ss(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,qt.reportTypeError)(t)),s.endIf()):ss(t,p),i||s.if((0,f._)`${y.default.errors} === ${n||0}`))}}function ss(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,Pi.assignDefaults)(t,e.type),r.block(()=>{for(let o of e.rules)(0,yr.shouldUseRule)(n,o)&&hs(t,o.keyword,o.definition,e.type)})}function zi(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Fi(t,e),t.opts.allowUnionTypes||Ki(t,e),Ji(t,t.dataTypes))}function Fi(t,e){if(!!e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{os(t.dataTypes,r)||gr(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),t.dataTypes=t.dataTypes.filter(r=>os(e,r))}}function Ki(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&gr(t,"use allowUnionTypes to allow union type keyword")}function Ji(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,yr.shouldUseRule)(t.schema,s)){let{type:o}=s.definition;o.length&&!o.some(a=>Ui(e,a))&&gr(t,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function Ui(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function os(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function gr(t,e){e+=` at "${t.schemaEnv.baseId+t.errSchemaPath}" (strictTypes)`,(0,de.checkStrictMode)(t,e,t.opts.strictTypes)}var $r=class{constructor(e,r,n){if((0,lt.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,de.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",ps(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,lt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",y.default.errors))}result(e,r,n){this.failResult((0,f.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,f.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,f._)`${r} !== undefined && (${(0,f.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?ut.reportExtraError:ut.reportError)(this,this.def.error,r)}$dataError(){(0,ut.reportError)(this,this.def.$dataError||ut.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,ut.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=f.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=f.nil,r=f.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:o,def:a}=this;n.if((0,f.or)((0,f._)`${s} === undefined`,r)),e!==f.nil&&n.assign(e,!0),(o.length||a.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==f.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:o}=this;return(0,f.or)(a(),i());function a(){if(n.length){if(!(r instanceof f.Name))throw new Error("ajv implementation error");let c=Array.isArray(n)?n:[n];return(0,f._)`${(0,qt.checkDataTypes)(c,r,o.opts.strictNumbers,qt.DataType.Wrong)}`}return f.nil}function i(){if(s.validateSchema){let c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,f._)`!${c}(${r})`}return f.nil}}subschema(e,r){let n=(0,_r.getSubschema)(this.it,e);(0,_r.extendSubschemaData)(n,this.it,e),(0,_r.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return Ci(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;!n.opts.unevaluated||(n.props!==!0&&e.props!==void 0&&(n.props=de.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=de.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,f.Name)),!0}};Pe.KeywordCxt=$r;function hs(t,e,r,n){let s=new $r(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,lt.funcKeywordCode)(s,r):"macro"in r?(0,lt.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,lt.funcKeywordCode)(s,r)}var Gi=/^\/(?:[^~]|~0|~1)*$/,Li=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ps(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,o;if(t==="")return y.default.rootData;if(t[0]==="/"){if(!Gi.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,o=y.default.rootData}else{let l=Li.exec(t);if(!l)throw new Error(`Invalid JSON-pointer: ${t}`);let u=+l[1];if(s=l[2],s==="#"){if(u>=e)throw new Error(c("property/index",u));return n[e-u]}if(u>e)throw new Error(c("data",u));if(o=r[e-u],!s)return o}let a=o,i=s.split("/");for(let l of i)l&&(o=(0,f._)`${o}${(0,f.getProperty)((0,de.unescapeJsonPointer)(l))}`,a=(0,f._)`${a} && ${o}`);return a;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${e}`}}Pe.getData=ps});var wr=g(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});var ms=class extends Error{constructor(e){super("validation failed");this.errors=e,this.ajv=this.validation=!0}};vr.default=ms});var Le=g(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});var br=ct(),_s=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`);this.missingRef=(0,br.resolveUrl)(e,r,n),this.missingSchema=(0,br.normalizeId)((0,br.getFullPath)(e,this.missingRef))}};Er.default=_s});var He=g(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.resolveSchema=ee.getCompilingSchema=ee.resolveRef=ee.compileSchema=ee.SchemaEnv=void 0;var se=q(),Hi=wr(),Te=ne(),oe=ct(),ys=F(),Bi=Tt(),dt=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,oe.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};ee.SchemaEnv=dt;function Sr(t){let e=gs.call(this,t);if(e)return e;let r=(0,oe.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,a=new se.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o}),i;t.$async&&(i=a.scopeValue("Error",{ref:Hi.default,code:(0,se._)`require("ajv/dist/runtime/validation_error").default`}));let c=a.scopeName("validate");t.validateName=c;let l={gen:a,allErrors:this.opts.allErrors,data:Te.default.data,parentData:Te.default.parentData,parentDataProperty:Te.default.parentDataProperty,dataNames:[Te.default.data],dataPathArr:[se.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,se.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:i,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:se.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,se._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(t),(0,Bi.validateFunctionCode)(l),a.optimize(this.opts.code.optimize);let d=a.toString();u=`${a.scopeRefs(Te.default.scope)}return ${d}`,this.opts.code.process&&(u=this.opts.code.process(u,t));let R=new Function(`${Te.default.self}`,`${Te.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:R}),R.errors=null,R.schema=t.schema,R.schemaEnv=t,t.$async&&(R.$async=!0),this.opts.code.source===!0&&(R.source={validateName:c,validateCode:d,scopeValues:a._values}),this.opts.unevaluated){let{props:v,items:N}=l;R.evaluated={props:v instanceof se.Name?void 0:v,items:N instanceof se.Name?void 0:N,dynamicProps:v instanceof se.Name,dynamicItems:N instanceof se.Name},R.source&&(R.source.evaluated=(0,se.stringify)(R.evaluated))}return t.validate=R,t}catch(d){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),d}finally{this._compilations.delete(t)}}ee.compileSchema=Sr;function Wi(t,e,r){var n;r=(0,oe.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let o=Yi.call(this,t,r);if(o===void 0){let a=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:i}=this.opts;a&&(o=new dt({schema:a,schemaId:i,root:t,baseId:e}))}if(o!==void 0)return t.refs[r]=Qi.call(this,o)}ee.resolveRef=Wi;function Qi(t){return(0,oe.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Sr.call(this,t)}function gs(t){for(let e of this._compilations)if(Xi(e,t))return e}ee.getCompilingSchema=gs;function Xi(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Yi(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||It.call(this,t,e)}function It(t,e){let r=this.opts.uriResolver.parse(e),n=(0,oe._getFullPath)(this.opts.uriResolver,r),s=(0,oe.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return Pr.call(this,r,t);let o=(0,oe.normalizeId)(n),a=this.refs[o]||this.schemas[o];if(typeof a=="string"){let i=It.call(this,t,a);return typeof i?.schema!="object"?void 0:Pr.call(this,r,i)}if(typeof a?.schema=="object"){if(a.validate||Sr.call(this,a),o===(0,oe.normalizeId)(e)){let{schema:i}=a,{schemaId:c}=this.opts,l=i[c];return l&&(s=(0,oe.resolveUrl)(this.opts.uriResolver,s,l)),new dt({schema:i,schemaId:c,root:t,baseId:s})}return Pr.call(this,r,a)}}ee.resolveSchema=It;var Zi=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Pr(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let i of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,ys.unescapeFragment)(i)];if(c===void 0)return;r=c;let l=typeof r=="object"&&r[this.opts.schemaId];!Zi.has(i)&&l&&(e=(0,oe.resolveUrl)(this.opts.uriResolver,e,l))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,ys.schemaHasRulesButRef)(r,this.RULES)){let i=(0,oe.resolveUrl)(this.opts.uriResolver,e,r.$ref);o=It.call(this,n,i)}let{schemaId:a}=this.opts;if(o=o||new dt({schema:r,schemaId:a,root:n,baseId:e}),o.schema!==o.root.schema)return o}});var $s=g((Gl,xi)=>{xi.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var ws=g(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});var vs=__uri_js$;vs.code='require("ajv/dist/runtime/uri").default';Nr.default=vs});var Os=g(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.CodeGen=U.Name=U.nil=U.stringify=U.str=U._=U.KeywordCxt=void 0;var ec=Tt();Object.defineProperty(U,"KeywordCxt",{enumerable:!0,get:function(){return ec.KeywordCxt}});var Be=q();Object.defineProperty(U,"_",{enumerable:!0,get:function(){return Be._}});Object.defineProperty(U,"str",{enumerable:!0,get:function(){return Be.str}});Object.defineProperty(U,"stringify",{enumerable:!0,get:function(){return Be.stringify}});Object.defineProperty(U,"nil",{enumerable:!0,get:function(){return Be.nil}});Object.defineProperty(U,"Name",{enumerable:!0,get:function(){return Be.Name}});Object.defineProperty(U,"CodeGen",{enumerable:!0,get:function(){return Be.CodeGen}});var tc=wr(),Ns=Le(),rc=ir(),ft=He(),nc=q(),ht=ct(),Dt=Rt(),kr=F(),bs=$s(),sc=ws(),js=(t,e)=>new RegExp(t,e);js.code="new RegExp";var oc=["removeAdditional","useDefaults","coerceTypes"],ac=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),ic={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},cc={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Es=200;function uc(t){var e,r,n,s,o,a,i,c,l,u,d,p,R,v,N,m,j,A,_,V,I,z,H,ae,Lt;let rt=t.strict,Ht=(e=t.code)===null||e===void 0?void 0:e.optimize,sn=Ht===!0||Ht===void 0?1:Ht||0,on=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:js,Mo=(s=t.uriResolver)!==null&&s!==void 0?s:sc.default;return{strictSchema:(a=(o=t.strictSchema)!==null&&o!==void 0?o:rt)!==null&&a!==void 0?a:!0,strictNumbers:(c=(i=t.strictNumbers)!==null&&i!==void 0?i:rt)!==null&&c!==void 0?c:!0,strictTypes:(u=(l=t.strictTypes)!==null&&l!==void 0?l:rt)!==null&&u!==void 0?u:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:rt)!==null&&p!==void 0?p:"log",strictRequired:(v=(R=t.strictRequired)!==null&&R!==void 0?R:rt)!==null&&v!==void 0?v:!1,code:t.code?{...t.code,optimize:sn,regExp:on}:{optimize:sn,regExp:on},loopRequired:(N=t.loopRequired)!==null&&N!==void 0?N:Es,loopEnum:(m=t.loopEnum)!==null&&m!==void 0?m:Es,meta:(j=t.meta)!==null&&j!==void 0?j:!0,messages:(A=t.messages)!==null&&A!==void 0?A:!0,inlineRefs:(_=t.inlineRefs)!==null&&_!==void 0?_:!0,schemaId:(V=t.schemaId)!==null&&V!==void 0?V:"$id",addUsedSchema:(I=t.addUsedSchema)!==null&&I!==void 0?I:!0,validateSchema:(z=t.validateSchema)!==null&&z!==void 0?z:!0,validateFormats:(H=t.validateFormats)!==null&&H!==void 0?H:!0,unicodeRegExp:(ae=t.unicodeRegExp)!==null&&ae!==void 0?ae:!0,int32range:(Lt=t.int32range)!==null&&Lt!==void 0?Lt:!0,uriResolver:Mo}}var Mt=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...uc(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new nc.ValueScope({scope:{},prefixes:ac,es5:r,lines:n}),this.logger=mc(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,rc.getRules)(),Ps.call(this,ic,e,"NOT SUPPORTED"),Ps.call(this,cc,e,"DEPRECATED","warn"),this._metaOpts=hc.call(this),e.formats&&dc.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&fc.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),lc.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=bs;n==="id"&&(s={...bs},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(u,d){await o.call(this,u.$schema);let p=this._addSchema(u,d);return p.validate||a.call(this,p)}async function o(u){u&&!this.getSchema(u)&&await s.call(this,{$ref:u},!0)}async function a(u){try{return this._compileSchemaEnv(u)}catch(d){if(!(d instanceof Ns.default))throw d;return i.call(this,d),await c.call(this,d.missingSchema),a.call(this,u)}}function i({missingSchema:u,missingRef:d}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${d} cannot be resolved`)}async function c(u){let d=await l.call(this,u);this.refs[u]||await o.call(this,d.$schema),this.refs[u]||this.addSchema(d,u,r)}async function l(u){let d=this._loading[u];if(d)return d;try{return await(this._loading[u]=n(u))}finally{delete this._loading[u]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let a of e)this.addSchema(a,void 0,n,s);return this}let o;if(typeof e=="object"){let{schemaId:a}=this.opts;if(o=e[a],o!==void 0&&typeof o!="string")throw new Error(`schema ${a} must be string`)}return r=(0,ht.normalizeId)(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return s}getSchema(e){let r;for(;typeof(r=Ss.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new ft.SchemaEnv({schema:{},schemaId:n});if(r=ft.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=Ss.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,ht.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(yc.call(this,n,r),!r)return(0,kr.eachItem)(n,o=>jr.call(this,o)),this;$c.call(this,r);let s={...r,type:(0,Dt.getJSONTypes)(r.type),schemaType:(0,Dt.getJSONTypes)(r.schemaType)};return(0,kr.eachItem)(n,s.type.length===0?o=>jr.call(this,o,s):o=>s.type.forEach(a=>jr.call(this,o,s,a))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(o=>o.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,o)=>s+r+o)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let o=s.split("/").slice(1),a=e;for(let i of o)a=a[i];for(let i in n){let c=n[i];if(typeof c!="object")continue;let{$data:l}=c.definition,u=a[i];l&&u&&(a[i]=ks(u))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,o=this.opts.addUsedSchema){let a,{schemaId:i}=this.opts;if(typeof e=="object")a=e[i];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;n=(0,ht.normalizeId)(a||n);let l=ht.getSchemaRefs.call(this,e,n);return c=new ft.SchemaEnv({schema:e,schemaId:i,meta:r,baseId:n,localRefs:l}),this._cache.set(c.schema,c),o&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),s&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):ft.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{ft.compileSchema.call(this,e)}finally{this.opts=r}}};U.default=Mt;Mt.ValidationError=tc.default;Mt.MissingRefError=Ns.default;function Ps(t,e,r,n="error"){for(let s in t){let o=s;o in e&&this.logger[n](`${r}: option ${s}. ${t[o]}`)}}function Ss(t){return t=(0,ht.normalizeId)(t),this.schemas[t]||this.refs[t]}function lc(){let t=this.opts.schemas;if(!!t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function dc(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function fc(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function hc(){let t={...this.opts};for(let e of oc)delete t[e];return t}var pc={log(){},warn(){},error(){}};function mc(t){if(t===!1)return pc;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var _c=/^[a-z_$][a-z0-9_$:-]*$/i;function yc(t,e){let{RULES:r}=this;if((0,kr.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!_c.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function jr(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,a=s?o.post:o.rules.find(({type:c})=>c===r);if(a||(a={type:r,rules:[]},o.rules.push(a)),o.keywords[t]=!0,!e)return;let i={keyword:t,definition:{...e,type:(0,Dt.getJSONTypes)(e.type),schemaType:(0,Dt.getJSONTypes)(e.schemaType)}};e.before?gc.call(this,a,i,e.before):a.rules.push(i),o.all[t]=i,(n=e.implements)===null||n===void 0||n.forEach(c=>this.addKeyword(c))}function gc(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function $c(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=ks(e)),t.validateSchema=this.compile(e,!0))}var vc={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ks(t){return{anyOf:[t,vc]}}});var Ts=g(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.callRef=Ie.getValidate=void 0;var wc=Le(),Rs=be(),Z=q(),We=ne(),Cs=He(),At=F(),bc={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:o,validateName:a,opts:i,self:c}=n,{root:l}=o;if((r==="#"||r==="#/")&&s===l.baseId)return d();let u=Cs.resolveRef.call(c,l,s,r);if(u===void 0)throw new wc.default(n.opts.uriResolver,s,r);if(u instanceof Cs.SchemaEnv)return p(u);return R(u);function d(){if(o===l)return Vt(t,a,o,o.$async);let v=e.scopeValue("root",{ref:l});return Vt(t,(0,Z._)`${v}.validate`,l,l.$async)}function p(v){let N=qs(t,v);Vt(t,N,v,v.$async)}function R(v){let N=e.scopeValue("schema",i.code.source===!0?{ref:v,code:(0,Z.stringify)(v)}:{ref:v}),m=e.name("valid"),j=t.subschema({schema:v,dataTypes:[],schemaPath:Z.nil,topSchemaRef:N,errSchemaPath:r},m);t.mergeEvaluated(j),t.ok(m)}}};function qs(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Z._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Ie.getValidate=qs;function Vt(t,e,r,n){let{gen:s,it:o}=t,{allErrors:a,schemaEnv:i,opts:c}=o,l=c.passContext?We.default.this:Z.nil;n?u():d();function u(){if(!i.$async)throw new Error("async schema referenced by sync schema");let v=s.let("valid");s.try(()=>{s.code((0,Z._)`await ${(0,Rs.callValidateCode)(t,e,l)}`),R(e),a||s.assign(v,!0)},N=>{s.if((0,Z._)`!(${N} instanceof ${o.ValidationError})`,()=>s.throw(N)),p(N),a||s.assign(v,!1)}),t.ok(v)}function d(){t.result((0,Rs.callValidateCode)(t,e,l),()=>R(e),()=>p(e))}function p(v){let N=(0,Z._)`${v}.errors`;s.assign(We.default.vErrors,(0,Z._)`${We.default.vErrors} === null ? ${N} : ${We.default.vErrors}.concat(${N})`),s.assign(We.default.errors,(0,Z._)`${We.default.vErrors}.length`)}function R(v){var N;if(!o.opts.unevaluated)return;let m=(N=r?.validate)===null||N===void 0?void 0:N.evaluated;if(o.props!==!0)if(m&&!m.dynamicProps)m.props!==void 0&&(o.props=At.mergeEvaluated.props(s,m.props,o.props));else{let j=s.var("props",(0,Z._)`${v}.evaluated.props`);o.props=At.mergeEvaluated.props(s,j,o.props,Z.Name)}if(o.items!==!0)if(m&&!m.dynamicItems)m.items!==void 0&&(o.items=At.mergeEvaluated.items(s,m.items,o.items));else{let j=s.var("items",(0,Z._)`${v}.evaluated.items`);o.items=At.mergeEvaluated.items(s,j,o.items,Z.Name)}}}Ie.callRef=Vt;Ie.default=bc});var fe=g(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.checkMetadata=void 0;var Ec=F(),Pc={keyword:"metadata",schemaType:"object",code(t){Is(t);let{gen:e,schema:r,it:n}=t;if((0,Ec.alwaysValidSchema)(n,r))return;let s=e.name("valid");t.subschema({keyword:"metadata",jtdMetadata:!0},s),t.ok(s)}};function Is({it:t,keyword:e},r){if(t.jtdMetadata!==r)throw new Error(`JTD: "${e}" cannot be used in this schema location`)}pt.checkMetadata=Is;pt.default=Pc});var zt=g(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.hasRef=void 0;var Ds=He(),mt=q(),Sc=Le(),Ms=ne(),As=Ts(),Nc=fe(),jc={keyword:"ref",schemaType:"string",code(t){(0,Nc.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:s,it:o}=t,{schemaEnv:{root:a}}=o,i=e.name("valid");s.nullable?(e.var(i,(0,mt._)`${r} === null`),e.if((0,mt.not)(i),c)):(e.var(i,!1),c()),t.ok(i);function c(){var d;let p=(d=a.schema.definitions)===null||d===void 0?void 0:d[n];if(!p)throw new Sc.default(o.opts.uriResolver,"",n,`No definition ${n}`);Or(p)||!o.opts.inlineRefs?l(p):u(p)}function l(d){let p=Ds.compileSchema.call(o.self,new Ds.SchemaEnv({schema:d,root:a,schemaPath:`/definitions/${n}`})),R=(0,As.getValidate)(t,p),v=e.const("_errs",Ms.default.errors);(0,As.callRef)(t,R,p,p.$async),e.assign(i,(0,mt._)`${v} === ${Ms.default.errors}`)}function u(d){let p=e.scopeValue("schema",o.opts.code.source===!0?{ref:d,code:(0,mt.stringify)(d)}:{ref:d});t.subschema({schema:d,dataTypes:[],schemaPath:mt.nil,topSchemaRef:p,errSchemaPath:`/definitions/${n}`},i)}}};function Or(t){for(let e in t){let r;if(e==="ref"||typeof(r=t[e])=="object"&&Or(r))return!0}return!1}_t.hasRef=Or;_t.default=jc});var Cr=g(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});var kc=/t|\s/i,Oc=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Rc=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,Cc=[0,31,28,31,30,31,30,31,31,30,31,30,31];function zs(t,e){let r=t.split(kc);return r.length===2&&Vs(r[0])&&qc(r[1])||e&&r.length===1&&Vs(r[0])}Rr.default=zs;function Vs(t){let e=Oc.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&(s<=Cc[n]||n===2&&s===29&&(r%100===0?r%400===0:r%4===0))}function qc(t){let e=Rc.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3],o=+(e[4]||0),a=+(e[5]||0);return r<=23&&n<=59&&s<=59||r-o===23&&n-a===59&&s===60}zs.code='require("ajv/dist/runtime/timestamp").default'});var Qe=g(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.typeErrorParams=Se.typeErrorMessage=Se.typeError=void 0;var Tc=q();function Ic(t){return{message:e=>Fs(e,t),params:e=>Ks(e,t)}}Se.typeError=Ic;function Fs({parentSchema:t},e){return t?.nullable?`must be ${e} or null`:`must be ${e}`}Se.typeErrorMessage=Fs;function Ks({parentSchema:t},e){return(0,Tc._)`{type: ${e}, nullable: ${!!t?.nullable}}`}Se.typeErrorParams=Ks});var qr=g(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.intRange=void 0;var x=q(),Dc=Cr(),Mc=F(),Ac=fe(),Js=Qe();Xe.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var Vc={message:t=>(0,Js.typeErrorMessage)(t,t.schema),params:t=>(0,Js.typeErrorParams)(t,t.schema)};function zc(t){let{gen:e,data:r,it:n}=t,{timestamp:s,allowDate:o}=n.opts;if(s==="date")return(0,x._)`${r} instanceof Date `;let a=(0,Mc.useFunc)(e,Dc.default),i=o?(0,x._)`, true`:x.nil,c=(0,x._)`typeof ${r} == "string" && ${a}(${r}${i})`;return s==="string"?c:(0,x.or)((0,x._)`${r} instanceof Date`,c)}var Fc={keyword:"type",schemaType:"string",error:Vc,code(t){(0,Ac.checkMetadata)(t);let{data:e,schema:r,parentSchema:n,it:s}=t,o;switch(r){case"boolean":case"string":o=(0,x._)`typeof ${e} == ${r}`;break;case"timestamp":{o=zc(t);break}case"float32":case"float64":o=(0,x._)`typeof ${e} == "number"`;break;default:{let a=r;if(o=(0,x._)`typeof ${e} == "number" && isFinite(${e}) && !(${e} % 1)`,!s.opts.int32range&&(a==="int32"||a==="uint32"))a==="uint32"&&(o=(0,x._)`${o} && ${e} >= 0`);else{let[i,c]=Xe.intRange[a];o=(0,x._)`${o} && ${e} >= ${i} && ${e} <= ${c}`}}}t.pass(n.nullable?(0,x.or)((0,x._)`${e} === null`,o):o)}};Xe.default=Fc});var Ze=g(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.checkNullableObject=Ye.checkNullable=void 0;var Ft=q();function Us({gen:t,data:e,parentSchema:r},n=Ft.nil){let s=t.name("valid");return r.nullable?(t.let(s,(0,Ft._)`${e} === null`),n=(0,Ft.not)(s)):t.let(s,!1),[s,n]}Ye.checkNullable=Us;function Kc(t,e){let[r,n]=Us(t,e);return[r,(0,Ft._)`${n} && typeof ${t.data} == "object" && !Array.isArray(${t.data})`]}Ye.checkNullableObject=Kc});var Gs=g(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});var Ne=q(),Jc=fe(),Uc=Ze(),Gc={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Ne._)`{allowedValues: ${t}}`},Lc={keyword:"enum",schemaType:"array",error:Gc,code(t){(0,Jc.checkMetadata)(t);let{gen:e,data:r,schema:n,schemaValue:s,parentSchema:o,it:a}=t;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let i,c=(0,Ne._)`typeof ${r} == "string"`;if(n.length>=a.opts.loopEnum){let u;[i,u]=(0,Uc.checkNullable)(t,c),e.if(u,l)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");i=(0,Ne.and)(c,(0,Ne.or)(...n.map(u=>(0,Ne._)`${r} === ${u}`))),o.nullable&&(i=(0,Ne.or)((0,Ne._)`${r} === null`,i))}t.pass(i);function l(){e.forOf("v",s,u=>e.if((0,Ne._)`${i} = ${r} === ${u}`,()=>e.break()))}}};Tr.default=Lc});var Hs=g(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});var Hc=F(),Bc=be(),Ls=q(),Wc=fe(),Qc=Ze(),Xc=Qe(),Yc={keyword:"elements",schemaType:"object",error:(0,Xc.typeError)("array"),code(t){(0,Wc.checkMetadata)(t);let{gen:e,data:r,schema:n,it:s}=t;if((0,Hc.alwaysValidSchema)(s,n))return;let[o]=(0,Qc.checkNullable)(t);e.if((0,Ls.not)(o),()=>e.if((0,Ls._)`Array.isArray(${r})`,()=>e.assign(o,(0,Bc.validateArray)(t)),()=>t.error())),t.ok(o)}};Ir.default=Yc});var Mr=g(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.validateProperties=je.error=void 0;var Dr=be(),Bs=F(),De=q(),Zc=fe(),xc=Ze(),Ws=Qe(),xe;(function(t){t.Additional="additional",t.Missing="missing"})(xe||(xe={}));je.error={message:t=>{let{params:e}=t;return e.propError?e.propError===xe.Additional?"must NOT have additional properties":`must have property '${e.missingProperty}'`:(0,Ws.typeErrorMessage)(t,"object")},params:t=>{let{params:e}=t;return e.propError?e.propError===xe.Additional?(0,De._)`{error: ${e.propError}, additionalProperty: ${e.additionalProperty}}`:(0,De._)`{error: ${e.propError}, missingProperty: ${e.missingProperty}}`:(0,Ws.typeErrorParams)(t,"object")}};var eu={keyword:"properties",schemaType:"object",error:je.error,code:Qs};function Qs(t){(0,Zc.checkMetadata)(t);let{gen:e,data:r,parentSchema:n,it:s}=t,{additionalProperties:o,nullable:a}=n;if(s.jtdDiscriminator&&a)throw new Error("JTD: nullable inside discriminator mapping");if(R())throw new Error("JTD: properties and optionalProperties have common members");let[i,c]=v("properties"),[l,u]=v("optionalProperties");if(c.length===0&&u.length===0&&o)return;let[d,p]=s.jtdDiscriminator===void 0?(0,xc.checkNullableObject)(t,r):[e.let("valid",!1),!0];e.if(p,()=>e.assign(d,!0).block(()=>{N(c,"properties",!0),N(u,"optionalProperties"),o||j()})),t.pass(d);function R(){let _=n.properties,V=n.optionalProperties;if(!(_&&V))return!1;for(let I in _)if(Object.prototype.hasOwnProperty.call(V,I))return!0;return!1}function v(_){let V=n[_],I=V?(0,Dr.allSchemaProperties)(V):[];if(s.jtdDiscriminator&&I.some(H=>H===s.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${_}`);let z=I.filter(H=>!(0,Bs.alwaysValidSchema)(s,V[H]));return[I,z]}function N(_,V,I){let z=e.var("valid");for(let ae of _)e.if((0,Dr.propertyInData)(e,r,ae,s.opts.ownProperties),()=>m(ae,V,z),()=>H(ae)),t.ok(z);function H(ae){I?(e.assign(z,!1),t.error(!1,{propError:xe.Missing,missingProperty:ae},{schemaPath:ae})):e.assign(z,!0)}}function m(_,V,I){t.subschema({keyword:V,schemaProp:_,dataProp:_},I)}function j(){e.forIn("key",r,_=>{let V=s.jtdDiscriminator===void 0?i:[s.jtdDiscriminator].concat(i),I=A(_,V,"properties"),z=A(_,l,"optionalProperties"),H=I===!0?z:z===!0?I:(0,De.and)(I,z);e.if(H,()=>{s.opts.removeAdditional?e.code((0,De._)`delete ${r}[${_}]`):(t.error(!1,{propError:xe.Additional,additionalProperty:_},{instancePath:_,parentSchema:!0}),s.opts.allErrors||e.break())})})}function A(_,V,I){let z;if(V.length>8){let H=(0,Bs.schemaRefOrVal)(s,n[I],I);z=(0,De.not)((0,Dr.isOwnProperty)(e,H,_))}else V.length?z=(0,De.and)(...V.map(H=>(0,De._)`${_} !== ${H}`)):z=!0;return z}}je.validateProperties=Qs;je.default=eu});var Ys=g(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});var Xs=Mr(),tu={keyword:"optionalProperties",schemaType:"object",error:Xs.error,code(t){t.parentSchema.properties||(0,Xs.validateProperties)(t)}};Ar.default=tu});var Zs=g(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.DiscrError=void 0;var ru;(function(t){t.Tag="tag",t.Mapping="mapping"})(ru=yt.DiscrError||(yt.DiscrError={}))});var eo=g(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});var Me=q(),nu=fe(),su=Ze(),xs=Qe(),Kt=Zs(),ou={message:t=>{let{schema:e,params:r}=t;return r.discrError?r.discrError===Kt.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in mapping`:(0,xs.typeErrorMessage)(t,"object")},params:t=>{let{schema:e,params:r}=t;return r.discrError?(0,Me._)`{error: ${r.discrError}, tag: ${e}, tagValue: ${r.tag}}`:(0,xs.typeErrorParams)(t,"object")}},au={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:ou,code(t){(0,nu.checkMetadata)(t);let{gen:e,data:r,schema:n,parentSchema:s}=t,[o,a]=(0,su.checkNullableObject)(t,r);e.if(a),i(),e.elseIf((0,Me.not)(o)),t.error(),e.endIf(),t.ok(o);function i(){let u=e.const("tag",(0,Me._)`${r}${(0,Me.getProperty)(n)}`);e.if((0,Me._)`${u} === undefined`),t.error(!1,{discrError:Kt.DiscrError.Tag,tag:u}),e.elseIf((0,Me._)`typeof ${u} == "string"`),c(u),e.else(),t.error(!1,{discrError:Kt.DiscrError.Tag,tag:u},{instancePath:n}),e.endIf()}function c(u){e.if(!1);for(let d in s.mapping)e.elseIf((0,Me._)`${u} === ${d}`),e.assign(o,l(d));e.else(),t.error(!1,{discrError:Kt.DiscrError.Mapping,tag:u},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),e.endIf()}function l(u){let d=e.name("valid");return t.subschema({keyword:"mapping",schemaProp:u,jtdDiscriminator:n},d),d}}};Vr.default=au});var no=g(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});var to=F(),ro=q(),iu=fe(),cu=Ze(),uu=Qe(),lu={keyword:"values",schemaType:"object",error:(0,uu.typeError)("object"),code(t){(0,iu.checkMetadata)(t);let{gen:e,data:r,schema:n,it:s}=t;if((0,to.alwaysValidSchema)(s,n))return;let[o,a]=(0,cu.checkNullableObject)(t,r);e.if(a),e.assign(o,i()),e.elseIf((0,ro.not)(o)),t.error(),e.endIf(),t.ok(o);function i(){let c=e.name("valid");if(s.allErrors){let u=e.let("valid",!0);return l(()=>e.assign(u,!1)),u}return e.var(c,!0),l(()=>e.break()),c;function l(u){e.forIn("key",r,d=>{t.subschema({keyword:"values",dataProp:d,dataPropType:to.Type.Str},c),e.if((0,ro.not)(c),u)})}}}};zr.default=lu});var so=g(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});var du=be(),fu={keyword:"union",schemaType:"array",trackErrors:!0,code:du.validateUnion,error:{message:"must match a schema in union"}};Fr.default=fu});var oo=g(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});var hu=zt(),pu=qr(),mu=Gs(),_u=Hs(),yu=Mr(),gu=Ys(),$u=eo(),vu=no(),wu=so(),bu=fe(),Eu=["definitions",hu.default,pu.default,mu.default,_u.default,yu.default,gu.default,$u.default,vu.default,wu.default,bu.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];Kr.default=Eu});var uo=g(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});var he=t=>{let e={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return t&&(e.definitions={values:{ref:"schema"}}),e},Pu=t=>({optionalProperties:he(t)}),Su=t=>({properties:{ref:{type:"string"}},optionalProperties:he(t)}),Nu=t=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:he(t)}),ju=t=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:he(t)}),ku=t=>({properties:{elements:{ref:"schema"}},optionalProperties:he(t)}),io=t=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...he(t)}}),co=t=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...he(t)}}),Ou=t=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[io(!1),co(!1)]}}}},optionalProperties:he(t)}),Ru=t=>({properties:{values:{ref:"schema"}},optionalProperties:he(t)}),ao=t=>({metadata:{union:[Pu,Su,Nu,ju,ku,io,co,Ou,Ru].map(e=>e(t))}}),Cu={definitions:{schema:ao(!1)},...ao(!0)};Jr.default=Cu});var Ur=g(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.jtdForms=void 0;Jt.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var fo=g(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});var Gr=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,qu={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function lo(t){return Gr.lastIndex=0,'"'+(Gr.test(t)?t.replace(Gr,e=>{let r=qu[e];return typeof r=="string"?r:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}):t)+'"'}Lr.default=lo;lo.code='require("ajv/dist/runtime/quote").default'});var $o=g(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});var Tu=Ur(),po=He(),S=q(),Iu=Le(),M=ne(),Du=be(),Mu=zt(),Au=F(),Vu=fo(),zu={elements:Ku,values:Ju,discriminator:Uu,properties:ho,optionalProperties:ho,enum:gt,type:Gu,ref:Hu};function mo(t,e){let r=po.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,a=new S.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o}),i=a.scopeName("serialize"),c={self:this,gen:a,schema:t.schema,schemaEnv:t,definitions:e,data:M.default.data},l;try{this._compilations.add(t),t.serializeName=i,a.func(i,M.default.data,!1,()=>{a.let(M.default.json,(0,S.str)``),$t(c),a.return(M.default.json)}),a.optimize(this.opts.code.optimize);let u=a.toString();l=`${a.scopeRefs(M.default.scope)}return ${u}`;let p=new Function(`${M.default.scope}`,l)(this.scope.get());this.scope.value(i,{ref:p}),t.serialize=p}catch(u){throw l&&this.logger.error("Error compiling serializer, function code:",l),delete t.serialize,delete t.serializeName,u}finally{this._compilations.delete(t)}return t}Hr.default=mo;function $t(t){let e;for(let r of Tu.jtdForms)if(r in t.schema){e=r;break}Fu(t,e?zu[e]:Wu)}function Fu(t,e){let{gen:r,schema:n,data:s}=t;if(!n.nullable)return e(t);r.if((0,S._)`${s} === undefined || ${s} === null`,()=>r.add(M.default.json,(0,S._)`"null"`),()=>e(t))}function Ku(t){let{gen:e,schema:r,data:n}=t;e.add(M.default.json,(0,S.str)`[`);let s=e.let("first",!0);e.forOf("el",n,o=>{go(t,s),$t({...t,schema:r.elements,data:o})}),e.add(M.default.json,(0,S.str)`]`)}function Ju(t){let{gen:e,schema:r,data:n}=t;e.add(M.default.json,(0,S.str)`{`);let s=e.let("first",!0);e.forIn("key",n,o=>_o(t,o,r.values,s)),e.add(M.default.json,(0,S.str)`}`)}function _o(t,e,r,n){let{gen:s,data:o}=t;go(t,n),gt({...t,data:e}),s.add(M.default.json,(0,S.str)`:`);let a=s.const("value",(0,S._)`${o}${(0,S.getProperty)(e)}`);$t({...t,schema:r,data:a})}function Uu(t){let{gen:e,schema:r,data:n}=t,{discriminator:s}=r;e.add(M.default.json,(0,S.str)`{${JSON.stringify(s)}:`);let o=e.const("tag",(0,S._)`${n}${(0,S.getProperty)(s)}`);gt({...t,data:o}),e.if(!1);for(let a in r.mapping){e.elseIf((0,S._)`${o} === ${a}`);let i=r.mapping[a];yo({...t,schema:i},s)}e.endIf(),e.add(M.default.json,(0,S.str)`}`)}function ho(t){let{gen:e}=t;e.add(M.default.json,(0,S.str)`{`),yo(t),e.add(M.default.json,(0,S.str)`}`)}function yo(t,e){let{gen:r,schema:n,data:s}=t,{properties:o,optionalProperties:a}=n,i=d(o),c=d(a),l=p(i.concat(c)),u=!e;for(let m of i)v(m,o[m],R(m));for(let m of c){let j=R(m);r.if((0,S.and)((0,S._)`${j} !== undefined`,(0,Du.isOwnProperty)(r,s,m)),()=>v(m,a[m],j))}n.additionalProperties&&r.forIn("key",s,m=>r.if(N(m,l),()=>_o(t,m,{},r.let("first",u))));function d(m){return m?Object.keys(m):[]}function p(m){if(e&&m.push(e),new Set(m).size!==m.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return m}function R(m){return r.const("value",(0,S._)`${s}${(0,S.getProperty)(m)}`)}function v(m,j,A){u?u=!1:r.add(M.default.json,(0,S.str)`,`),r.add(M.default.json,(0,S.str)`${JSON.stringify(m)}:`),$t({...t,schema:j,data:A})}function N(m,j){return j.length?(0,S.and)(...j.map(A=>(0,S._)`${m} !== ${A}`)):!0}}function Gu(t){let{gen:e,schema:r,data:n}=t;switch(r.type){case"boolean":e.add(M.default.json,(0,S._)`${n} ? "true" : "false"`);break;case"string":gt(t);break;case"timestamp":e.if((0,S._)`${n} instanceof Date`,()=>e.add(M.default.json,(0,S._)`'"' + ${n}.toISOString() + '"'`),()=>gt(t));break;default:Lu(t)}}function gt({gen:t,data:e}){t.add(M.default.json,(0,S._)`${(0,Au.useFunc)(t,Vu.default)}(${e})`)}function Lu({gen:t,data:e}){t.add(M.default.json,(0,S._)`"" + ${e}`)}function Hu(t){let{gen:e,self:r,data:n,definitions:s,schema:o,schemaEnv:a}=t,{ref:i}=o,c=s[i];if(!c)throw new Iu.default(r.opts.uriResolver,"",i,`No definition ${i}`);if(!(0,Mu.hasRef)(c))return $t({...t,schema:c});let{root:l}=a,u=mo.call(r,new po.SchemaEnv({schema:c,root:l}),s);e.add(M.default.json,(0,S._)`${Bu(e,u)}(${n})`)}function Bu(t,e){return e.serialize?t.scopeValue("serialize",{ref:e.serialize}):(0,S._)`${t.scopeValue("wrapper",{ref:e})}.serialize`}function Wu({gen:t,data:e}){t.add(M.default.json,(0,S._)`JSON.stringify(${e})`)}function go({gen:t},e){t.if(e,()=>t.assign(e,!1),()=>t.add(M.default.json,(0,S.str)`,`))}});var wo=g(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.parseJsonString=Oe.parseJsonNumber=Oe.parseJson=void 0;var Qu=/position\s(\d+)$/;function pe(t,e){let r;pe.message=void 0;let n;e&&(t=t.slice(e));try{return pe.position=e+t.length,JSON.parse(t)}catch(s){if(n=Qu.exec(s.message),!n){pe.message="unexpected end";return}r=+n[1];let o=t[r];t=t.slice(0,r),pe.position=e+r;try{return JSON.parse(t)}catch{pe.message=`unexpected token ${o}`;return}}}Oe.parseJson=pe;pe.message=void 0;pe.position=0;pe.code='require("ajv/dist/runtime/parseJson").parseJson';function me(t,e,r){let n="",s;if(me.message=void 0,t[e]==="-"&&(n+="-",e++),t[e]==="0")n+="0",e++;else if(!o(r)){a();return}if(r)return me.position=e,+n;if(t[e]==="."&&(n+=".",e++,!o())){a();return}if(s=t[e],(s==="e"||s==="E")&&(n+="e",e++,s=t[e],(s==="+"||s==="-")&&(n+=s,e++),!o())){a();return}return me.position=e,+n;function o(i){let c=!1;for(;s=t[e],s>="0"&&s<="9"&&(i===void 0||i-- >0);)c=!0,n+=s,e++;return c}function a(){me.position=e,me.message=e<t.length?`unexpected token ${t[e]}`:"unexpected end"}}Oe.parseJsonNumber=me;me.message=void 0;me.position=0;me.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var vo={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},Xu="a".charCodeAt(0),Yu="0".charCodeAt(0);function ke(t,e){let r="",n;for(ke.message=void 0;n=t[e++],n!=='"';)if(n==="\\")if(n=t[e],n in vo)r+=vo[n],e++;else if(n==="u"){e++;let o=4,a=0;for(;o--;){if(a<<=4,n=t[e],n===void 0){s("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")a+=n.charCodeAt(0)-Xu+10;else if(n>="0"&&n<="9")a+=n.charCodeAt(0)-Yu;else{s(`unexpected token ${n}`);return}e++}r+=String.fromCharCode(a)}else{s(`unexpected token ${n}`);return}else if(n===void 0){s("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{s(`unexpected token ${n}`);return}return ke.position=e,r;function s(o){ke.position=e,ke.message=o}}Oe.parseJsonString=ke;ke.message=void 0;ke.position=0;ke.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var qo=g(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});var Zu=Ur(),So=He(),h=q(),xu=Le(),E=ne(),el=be(),tl=zt(),rl=qr(),Qr=wo(),No=F(),nl=Cr(),sl={elements:cl,values:ul,discriminator:dl,properties:bo,optionalProperties:bo,enum:hl,type:fl,ref:pl};function jo(t,e){let r=So.getCompilingSchema.call(this,t);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,a=new h.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o}),i=a.scopeName("parse"),c={self:this,gen:a,schema:t.schema,schemaEnv:t,definitions:e,data:E.default.data,parseName:i,char:a.name("c")},l;try{this._compilations.add(t),t.parseName=i,ol(c),a.optimize(this.opts.code.optimize);let u=a.toString();l=`${a.scopeRefs(E.default.scope)}return ${u}`;let p=new Function(`${E.default.scope}`,l)(this.scope.get());this.scope.value(i,{ref:p}),t.parse=p}catch(u){throw l&&this.logger.error("Error compiling parser, function code:",l),delete t.parse,delete t.parseName,u}finally{this._compilations.delete(t)}return t}en.default=jo;var Wr=(0,h._)`undefined`;function ol(t){let{gen:e,parseName:r,char:n}=t;e.func(r,(0,h._)`${E.default.json}, ${E.default.jsonPos}, ${E.default.jsonPart}`,!1,()=>{e.let(E.default.data),e.let(n),e.assign((0,h._)`${r}.message`,Wr),e.assign((0,h._)`${r}.position`,Wr),e.assign(E.default.jsonPos,(0,h._)`${E.default.jsonPos} || 0`),e.const(E.default.jsonLen,(0,h._)`${E.default.json}.length`),Ut(t),xr(t),e.if(E.default.jsonPart,()=>{e.assign((0,h._)`${r}.position`,E.default.jsonPos),e.return(E.default.data)}),e.if((0,h._)`${E.default.jsonPos} === ${E.default.jsonLen}`,()=>e.return(E.default.data)),et(t)})}function Ut(t){let e;for(let r of Zu.jtdForms)if(r in t.schema){e=r;break}e?il(t,sl[e]):Yr(t)}var al=Po(!0,Po(!1,et));function il(t,e){let{gen:r,schema:n,data:s}=t;if(!n.nullable)return e(t);vt(t,"null",e,()=>r.assign(s,null))}function cl(t){let{gen:e,schema:r,data:n}=t;le(t,"[");let s=e.let("i",0);e.assign(n,(0,h._)`[]`),Xr(t,"]",()=>{let o=e.let("el");Ut({...t,schema:r.elements,data:o}),e.assign((0,h._)`${n}[${s}++]`,o)})}function ul(t){let{gen:e,schema:r,data:n}=t;le(t,"{"),e.assign(n,(0,h._)`{}`),Xr(t,"}",()=>ll(t,r.values))}function Xr(t,e,r){ko(t,e,r),le(t,e)}function ko(t,e,r){let{gen:n}=t;n.for((0,h._)`;${E.default.jsonPos}<${E.default.jsonLen} && ${Gt(1)}!==${e};`,()=>{r(),vt(t,",",()=>n.break(),s)});function s(){vt(t,e,()=>{},et)}}function ll(t,e){let{gen:r}=t,n=r.let("key");Ae({...t,data:n}),le(t,":"),Ro(t,n,e)}function dl(t){let{gen:e,data:r,schema:n}=t,{discriminator:s,mapping:o}=n;le(t,"{"),e.assign(r,(0,h._)`{}`);let a=e.const("pos",E.default.jsonPos),i=e.let("value"),c=e.let("tag");ko(t,"}",()=>{let l=e.let("key");Ae({...t,data:l}),le(t,":"),e.if((0,h._)`${l} === ${s}`,()=>{Ae({...t,data:c}),e.assign((0,h._)`${r}[${l}]`,c),e.break()},()=>Yr({...t,data:i}))}),e.assign(E.default.jsonPos,a),e.if((0,h._)`${c} === undefined`),_e(t,(0,h.str)`discriminator tag not found`);for(let l in o)e.elseIf((0,h._)`${c} === ${l}`),Oo({...t,schema:o[l]},s);e.else(),_e(t,(0,h.str)`discriminator value not in schema`),e.endIf()}function bo(t){let{gen:e,data:r}=t;le(t,"{"),e.assign(r,(0,h._)`{}`),Oo(t)}function Oo(t,e){let{gen:r,schema:n,data:s}=t,{properties:o,optionalProperties:a,additionalProperties:i}=n;if(Xr(t,"}",()=>{let c=r.let("key");if(Ae({...t,data:c}),le(t,":"),r.if(!1),Eo(t,c,o),Eo(t,c,a),e){r.elseIf((0,h._)`${c} === ${e}`);let l=r.let("tag");Ae({...t,data:l})}r.else(),i?Yr({...t,data:(0,h._)`${s}[${c}]`}):_e(t,(0,h.str)`property ${c} not allowed`),r.endIf()}),o){let c=(0,el.hasPropFunc)(r),l=(0,h.and)(...Object.keys(o).map(u=>(0,h._)`${c}.call(${s}, ${u})`));r.if((0,h.not)(l),()=>_e(t,(0,h.str)`missing required properties`))}}function Eo(t,e,r={}){let{gen:n}=t;for(let s in r)n.elseIf((0,h._)`${e} === ${s}`),Ro(t,e,r[s])}function Ro(t,e,r){Ut({...t,schema:r,data:(0,h._)`${t.data}[${e}]`})}function fl(t){let{gen:e,schema:r,data:n,self:s}=t;switch(r.type){case"boolean":al(t);break;case"string":Ae(t);break;case"timestamp":{Ae(t);let o=(0,No.useFunc)(e,nl.default),{allowDate:a,parseDate:i}=s.opts,c=a?(0,h._)`!${o}(${n}, true)`:(0,h._)`!${o}(${n})`,l=i?(0,h.or)(c,(0,h._)`(${n} = new Date(${n}), false)`,(0,h._)`isNaN(${n}.valueOf())`):c;e.if(l,()=>_e(t,(0,h.str)`invalid timestamp`));break}case"float32":case"float64":Br(t);break;default:{let o=r.type;if(!s.opts.int32range&&(o==="int32"||o==="uint32"))Br(t,16),o==="uint32"&&e.if((0,h._)`${n} < 0`,()=>_e(t,(0,h.str)`integer out of range`));else{let[a,i,c]=rl.intRange[o];Br(t,c),e.if((0,h._)`${n} < ${a} || ${n} > ${i}`,()=>_e(t,(0,h.str)`integer out of range`))}}}}function Ae(t){le(t,'"'),Zr(t,Qr.parseJsonString)}function hl(t){let{gen:e,data:r,schema:n}=t,s=n.enum;le(t,'"'),e.if(!1);for(let o of s){let a=JSON.stringify(o).slice(1);e.elseIf((0,h._)`${Gt(a.length)} === ${a}`),e.assign(r,(0,h.str)`${o}`),e.add(E.default.jsonPos,a.length)}e.else(),et(t),e.endIf()}function Br(t,e){let{gen:r}=t;xr(t),r.if((0,h._)`"-0123456789".indexOf(${Gt(1)}) < 0`,()=>et(t),()=>Zr(t,Qr.parseJsonNumber,e))}function Po(t,e){return r=>{let{gen:n,data:s}=r;vt(r,`${t}`,()=>e(r),()=>n.assign(s,t))}}function pl(t){let{gen:e,self:r,definitions:n,schema:s,schemaEnv:o}=t,{ref:a}=s,i=n[a];if(!i)throw new xu.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,tl.hasRef)(i))return Ut({...t,schema:i});let{root:c}=o,l=jo.call(r,new So.SchemaEnv({schema:i,root:c}),n);Co(t,ml(e,l),!0)}function ml(t,e){return e.parse?t.scopeValue("parse",{ref:e.parse}):(0,h._)`${t.scopeValue("wrapper",{ref:e})}.parse`}function Yr(t){Zr(t,Qr.parseJson)}function Zr(t,e,r){Co(t,(0,No.useFunc)(t.gen,e),r)}function Co(t,e,r){let{gen:n,data:s}=t;n.assign(s,(0,h._)`${e}(${E.default.json}, ${E.default.jsonPos}${r?(0,h._)`, ${r}`:h.nil})`),n.assign(E.default.jsonPos,(0,h._)`${e}.position`),n.if((0,h._)`${s} === undefined`,()=>_e(t,(0,h._)`${e}.message`))}function le(t,e){vt(t,e,et)}function vt(t,e,r,n){let{gen:s}=t,o=e.length;xr(t),s.if((0,h._)`${Gt(o)} === ${e}`,()=>{s.add(E.default.jsonPos,o),n?.(t)},()=>r(t))}function xr({gen:t,char:e}){t.code((0,h._)`while((${e}=${E.default.json}[${E.default.jsonPos}],${e}===" "||${e}==="\\n"||${e}==="\\r"||${e}==="\\t"))${E.default.jsonPos}++;`)}function Gt(t){return t===1?(0,h._)`${E.default.json}[${E.default.jsonPos}]`:(0,h._)`${E.default.json}.slice(${E.default.jsonPos}, ${E.default.jsonPos}+${t})`}function et(t){_e(t,(0,h._)`"unexpected token " + ${E.default.json}[${E.default.jsonPos}]`)}function _e({gen:t,parseName:e},r){t.assign((0,h._)`${e}.message`,r),t.assign((0,h._)`${e}.position`,E.default.jsonPos),t.return(Wr)}});var nn=g((K,To)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.CodeGen=K.Name=K.nil=K.stringify=K.str=K._=K.KeywordCxt=void 0;var _l=Os(),yl=oo(),gl=uo(),$l=$o(),vl=qo(),tn="JTD-meta-schema",rn=class extends _l.default{constructor(e={}){super({...e,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(yl.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(gl.default,tn,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(tn)?tn:void 0)}compileSerializer(e){let r=this._addSchema(e);return r.serialize||this._compileSerializer(r)}compileParser(e){let r=this._addSchema(e);return r.parse||this._compileParser(r)}_compileSerializer(e){if($l.default.call(this,e,e.schema.definitions||{}),!e.serialize)throw new Error("ajv implementation error");return e.serialize}_compileParser(e){if(vl.default.call(this,e,e.schema.definitions||{}),!e.parse)throw new Error("ajv implementation error");return e.parse}};To.exports=K=rn;Object.defineProperty(K,"__esModule",{value:!0});K.default=rn;var wl=Tt();Object.defineProperty(K,"KeywordCxt",{enumerable:!0,get:function(){return wl.KeywordCxt}});var tt=q();Object.defineProperty(K,"_",{enumerable:!0,get:function(){return tt._}});Object.defineProperty(K,"str",{enumerable:!0,get:function(){return tt.str}});Object.defineProperty(K,"stringify",{enumerable:!0,get:function(){return tt.stringify}});Object.defineProperty(K,"nil",{enumerable:!0,get:function(){return tt.nil}});Object.defineProperty(K,"Name",{enumerable:!0,get:function(){return tt.Name}});Object.defineProperty(K,"CodeGen",{enumerable:!0,get:function(){return tt.CodeGen}})});var Io=an(nn()),Do=an(nn()),{__esModule:md,CodeGen:_d,KeywordCxt:yd,_:gd,str:$d,stringify:vd,nil:wd,Name:bd}=Do,{default:bl,...El}=Do,Ed=Io.default??bl??El;export{_d as CodeGen,yd as KeywordCxt,bd as Name,gd as _,md as __esModule,Ed as default,wd as nil,$d as str,vd as stringify};
